<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
        }
        .btn {
            transition: all 0.2s;
        }
        .btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-800 to-gray-900 min-h-screen flex items-center justify-center p-4">
    <div class="bg-gray-900 rounded-2xl shadow-2xl p-6 w-full max-w-md border border-gray-700">
        <!-- Display -->
        <div class="bg-gradient-to-br from-green-900 to-green-950 rounded-lg p-4 mb-6 border border-green-700">
            <div id="expression" class="text-green-400 text-right text-sm h-6 overflow-x-auto mb-2"></div>
            <input type="text" id="display" value="0" readonly class="bg-transparent text-green-400 text-right text-4xl font-bold w-full focus:outline-none">
        </div>

        <!-- Buttons -->
        <div class="grid grid-cols-5 gap-2">
            <!-- Row 1 - Scientific Functions -->
            <button onclick="calculate('sin')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">sin</button>
            <button onclick="calculate('cos')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">cos</button>
            <button onclick="calculate('tan')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">tan</button>
            <button onclick="calculate('log')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">log</button>
            <button onclick="calculate('ln')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">ln</button>

            <!-- Row 2 -->
            <button onclick="calculate('sqrt')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">√</button>
            <button onclick="calculate('square')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">x²</button>
            <button onclick="calculate('power')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-3 font-semibold text-sm">xʸ</button>
            <button onclick="clearDisplay()" class="btn bg-red-600 hover:bg-red-700 text-white rounded-lg py-3 font-semibold text-sm">C</button>
            <button onclick="backspace()" class="btn bg-orange-600 hover:bg-orange-700 text-white rounded-lg py-3 font-semibold text-sm">⌫</button>

            <!-- Row 3 -->
            <button onclick="appendToDisplay('(')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-3 font-semibold">(</button>
            <button onclick="appendToDisplay(')')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-3 font-semibold">)</button>
            <button onclick="calculate('pi')" class="btn bg-purple-600 hover:bg-purple-700 text-white rounded-lg py-3 font-semibold text-sm">π</button>
            <button onclick="calculate('e')" class="btn bg-purple-600 hover:bg-purple-700 text-white rounded-lg py-3 font-semibold text-sm">e</button>
            <button onclick="appendToDisplay('/')" class="btn bg-orange-500 hover:bg-orange-600 text-white rounded-lg py-3 font-bold text-xl">÷</button>

            <!-- Row 4 -->
            <button onclick="appendToDisplay('7')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">7</button>
            <button onclick="appendToDisplay('8')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">8</button>
            <button onclick="appendToDisplay('9')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">9</button>
            <button onclick="appendToDisplay('*')" class="btn bg-orange-500 hover:bg-orange-600 text-white rounded-lg py-4 font-bold text-xl">×</button>
            <button onclick="calculate('factorial')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-4 font-semibold text-sm">n!</button>

            <!-- Row 5 -->
            <button onclick="appendToDisplay('4')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">4</button>
            <button onclick="appendToDisplay('5')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">5</button>
            <button onclick="appendToDisplay('6')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">6</button>
            <button onclick="appendToDisplay('-')" class="btn bg-orange-500 hover:bg-orange-600 text-white rounded-lg py-4 font-bold text-xl">−</button>
            <button onclick="calculate('percent')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-4 font-semibold text-xl">%</button>

            <!-- Row 6 -->
            <button onclick="appendToDisplay('1')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">1</button>
            <button onclick="appendToDisplay('2')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">2</button>
            <button onclick="appendToDisplay('3')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">3</button>
            <button onclick="appendToDisplay('+')" class="btn bg-orange-500 hover:bg-orange-600 text-white rounded-lg py-4 font-bold text-xl">+</button>
            <button onclick="calculate('inverse')" class="btn bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-4 font-semibold text-sm">1/x</button>

            <!-- Row 7 -->
            <button onclick="toggleSign()" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-semibold">±</button>
            <button onclick="appendToDisplay('0')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">0</button>
            <button onclick="appendToDisplay('.')" class="btn bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-4 font-bold text-xl">.</button>
            <button onclick="calculateResult()" class="btn bg-green-600 hover:bg-green-700 text-white rounded-lg py-4 font-bold text-xl col-span-2">=</button>
        </div>

        <!-- Mode Toggle -->
        <div class="mt-4 text-center">
            <button onclick="toggleAngleMode()" id="angleMode" class="text-green-400 text-sm hover:text-green-300 transition">
                Mode: DEG
            </button>
        </div>
    </div>

    <script>
        let currentValue = '0';
        let expression = '';
        let angleMode = 'DEG'; // DEG or RAD

        function updateDisplay() {
            document.getElementById('display').value = currentValue;
            document.getElementById('expression').textContent = expression;
        }

        function appendToDisplay(value) {
            if (currentValue === '0' && value !== '.') {
                currentValue = value;
            } else {
                currentValue += value;
            }
            expression += value;
            updateDisplay();
        }

        function clearDisplay() {
            currentValue = '0';
            expression = '';
            updateDisplay();
        }

        function backspace() {
            if (currentValue.length > 1) {
                currentValue = currentValue.slice(0, -1);
                expression = expression.slice(0, -1);
            } else {
                currentValue = '0';
                expression = '';
            }
            updateDisplay();
        }

        function toggleSign() {
            if (currentValue !== '0') {
                if (currentValue.startsWith('-')) {
                    currentValue = currentValue.substring(1);
                } else {
                    currentValue = '-' + currentValue;
                }
                updateDisplay();
            }
        }

        function toggleAngleMode() {
            angleMode = angleMode === 'DEG' ? 'RAD' : 'DEG';
            document.getElementById('angleMode').textContent = 'Mode: ' + angleMode;
        }

        function toRadians(degrees) {
            return degrees * (Math.PI / 180);
        }

        function calculate(operation) {
            const value = parseFloat(currentValue);
            let result;

            try {
                switch(operation) {
                    case 'sin':
                        result = angleMode === 'DEG' ? Math.sin(toRadians(value)) : Math.sin(value);
                        expression = `sin(${currentValue})`;
                        break;
                    case 'cos':
                        result = angleMode === 'DEG' ? Math.cos(toRadians(value)) : Math.cos(value);
                        expression = `cos(${currentValue})`;
                        break;
                    case 'tan':
                        result = angleMode === 'DEG' ? Math.tan(toRadians(value)) : Math.tan(value);
                        expression = `tan(${currentValue})`;
                        break;
                    case 'log':
                        result = Math.log10(value);
                        expression = `log(${currentValue})`;
                        break;
                    case 'ln':
                        result = Math.log(value);
                        expression = `ln(${currentValue})`;
                        break;
                    case 'sqrt':
                        result = Math.sqrt(value);
                        expression = `√(${currentValue})`;
                        break;
                    case 'square':
                        result = value * value;
                        expression = `(${currentValue})²`;
                        break;
                    case 'power':
                        appendToDisplay('**');
                        return;
                    case 'factorial':
                        result = factorial(Math.floor(value));
                        expression = `${currentValue}!`;
                        break;
                    case 'percent':
                        result = value / 100;
                        expression = `${currentValue}%`;
                        break;
                    case 'inverse':
                        result = 1 / value;
                        expression = `1/(${currentValue})`;
                        break;
                    case 'pi':
                        result = Math.PI;
                        expression = 'π';
                        break;
                    case 'e':
                        result = Math.E;
                        expression = 'e';
                        break;
                }

                currentValue = result.toString();
                updateDisplay();
            } catch (error) {
                currentValue = 'Error';
                updateDisplay();
            }
        }

        function factorial(n) {
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        function calculateResult() {
            try {
                // Replace ** with ^ for display purposes, but evaluate with **
                const evalExpression = expression.replace(/\^/g, '**');
                const result = eval(evalExpression);
                currentValue = result.toString();
                expression = '';
                updateDisplay();
            } catch (error) {
                currentValue = 'Error';
                expression = '';
                updateDisplay();
            }
        }

        // Keyboard support
        document.addEventListener('keydown', function(event) {
            const key = event.key;
            
            if (key >= '0' && key <= '9') {
                appendToDisplay(key);
            } else if (key === '.') {
                appendToDisplay('.');
            } else if (key === '+' || key === '-' || key === '*' || key === '/') {
                appendToDisplay(key);
            } else if (key === 'Enter' || key === '=') {
                calculateResult();
            } else if (key === 'Escape' || key === 'c' || key === 'C') {
                clearDisplay();
            } else if (key === 'Backspace') {
                backspace();
            } else if (key === '(' || key === ')') {
                appendToDisplay(key);
            }
        });

        updateDisplay();
    </script>
</body>
</html>